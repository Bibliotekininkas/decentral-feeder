database notes_keeper;

table entries {
    user_id text primary notnull,
    note_id int default(100),
    content text notnull
}

action add_note($content) public {
    INSERT INTO "entries" (user_id, content) VALUES (@caller, $content);
}

action delete_my_note() public {
    DELETE FROM entries WHERE user_id = @caller;
}

action delete_specific_user($user_id) public owner {
    DELETE FROM "entries" WHERE user_id = $user_id;
}

action delete_all_entries() public owner {
    DELETE FROM entries;
}

action get_user_note($user_id) public view {
    SELECT content, note_id FROM entries WHERE user_id = $user_id;
}

action get_my_note() public view {
    SELECT content, note_id FROM entries WHERE user_id = @caller;
}

action get_all_notes() public view {
    SELECT * FROM entries;
}
